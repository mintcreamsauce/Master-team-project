---

## ğŸš€ ForeignEye v2.3: í†µí•© ìµœì¢… ê³„íšì„œ (Capstone & Production)

### 1. í”„ë¡œì íŠ¸ ê°œìš”

* **í”„ë¡œì íŠ¸ëª…:** ForeignEye (v2.3, Unified Roadmap)
* **í”„ë¡œì íŠ¸ ë¹„ì „:** **"í™•ì¥í•˜ëŠ” ìš°ì£¼ (Expanding Universe)"**
* **í•µì‹¬ ëª©í‘œ:**
    * **M1 (ìº¡ìŠ¤í†¤):** 'ê²Œì„ ë£¨í”„'ì˜ í•µì‹¬ UXë¥¼ 'í•¨ì •'(ìŠˆí¼ ë…¸ë“œ, ìœ ë ¹ ìƒíƒœ) ì—†ì´ ì™„ë²½í•˜ê²Œ ì‹œì—°í•˜ëŠ” ë° ì§‘ì¤‘í•©ë‹ˆë‹¤.
    * **M2 (í”„ë¡œë•ì…˜):** M1ì˜ ì„±ê³µì„ ê¸°ë°˜ìœ¼ë¡œ, CI/CD, ë°ì´í„° ë³´ì •, ëŒ€ê·œëª¨ ETLì„ ë„ì…í•˜ì—¬ 'ì‹¤ì œ ìš´ì˜'ì´ ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ë¡œ í™•ì¥í•©ë‹ˆë‹¤.

---

### 2. í•µì‹¬ ì‚¬ìš©ì ê²½í—˜ (The Game Loop v2.3)

* **[Phase 1: Seed (ì”¨ì•—)]**
    * 'íƒí—˜ ì‹œì‘í•˜ê¸°' ê²€ìƒ‰ì°½ì„ í†µí•´ ì²« `MyConceptNode`ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    * **M1 (ìº¡ìŠ¤í†¤):** 'RAG', 'Sora' ë“± ì˜ë„ì ìœ¼ë¡œ **íë ˆì´ì…˜ëœ í‚¤ì›Œë“œ**ë¡œ ë°ëª¨ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‹œì‘í•˜ì—¬ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ ë†’ì…ë‹ˆë‹¤.

* **[Phase 2: Explore (íƒí—˜)]**
    * `MyConceptNode` í´ë¦­ ì‹œ, `Celery`ë¡œ ë¯¸ë¦¬ ì²˜ë¦¬ëœ `ArticleNode`ë¥¼ ì¦‰ì‹œ ìƒì„±í•©ë‹ˆë‹¤.

* **[Phase 3: Discover (ë°œê²¬)] - *'ìŠˆí¼ ë…¸ë“œ' í•¨ì • ë°©ì–´***
    * `ArticleNode` í´ë¦­ ì‹œ, [Phase 2] APIê°€ **ë¯¸ë¦¬ í¬í•¨(Embedded)**í•œ 'ì¹œì²™ ê°œë…'ì„ `RelativeNode`ë¡œ ì¦‰ì‹œ ìƒì„±í•©ë‹ˆë‹¤.
    * **M1 (ìº¡ìŠ¤í†¤):** ë°±ì—”ë“œ APIê°€ `ArticleNode`ì— ì„ë² ë”©í•  'ì¹œì²™ ê°œë…' ìˆ˜ë¥¼ **`LIMIT 30`** ë“±ìœ¼ë¡œ ëª…ì‹œì ìœ¼ë¡œ ì œí•œí•©ë‹ˆë‹¤. 'AI' ê°™ì€ ë…¸ë“œì—ì„œë„ ì‘ë‹µ ì†ë„ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

* **[Phase 4: Acquire (ìŠµë“)] - *'API ì‹¤íŒ¨' ë°©ì–´***
    * `RelativeNode` í´ë¦­ ì‹œ `react-query`ê°€ Optimistic Update (UI ì¦‰ì‹œ ë³€ê²½)ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
    * **M1 (ìº¡ìŠ¤í†¤):** API í˜¸ì¶œì´ (ë„¤íŠ¸ì›Œí¬/ì„œë²„ ì˜¤ë¥˜ë¡œ) **ì‹¤íŒ¨**í•˜ë©´, `react-query`ì˜ `onError` ì½œë°±ì´ UIë¥¼ `RelativeNode`ë¡œ **ì¦‰ì‹œ ë¡¤ë°±**í•˜ê³  "ìŠµë“ ì‹¤íŒ¨" ì•Œë¦¼(Toast)ì„ ë„ì›ë‹ˆë‹¤.

* **[Phase 5: Grow (ì„±ì¥)] - *'ìœ ë ¹ ìƒíƒœ' ë° 'ì¿¼ë¦¬ ì†ë„' í•¨ì • ë°©ì–´***
    * `GET /knowledge-map` APIê°€ `Neo4j`ë¥¼ ì¿¼ë¦¬í•˜ì—¬ ë™ì  ì§€ë„ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
    * **M1 (ìº¡ìŠ¤í†¤) 'ì¿¼ë¦¬ ì†ë„' ë°©ì–´:**
        1.  **ì¸ë±ì‹± (í•„ìˆ˜):** `CREATE INDEX ... IF NOT EXISTS`ë¥¼ ì•± ì‹œì‘ ì‹œ ì ìš©í•˜ì—¬ `Neo4j` ì¿¼ë¦¬ ì†ë„ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.
        2.  **ë°ì´í„° íë ˆì´ì…˜ (í•„ìˆ˜):** ë°ëª¨ ì‹œì—°ì€ 'AI'ê°€ ì•„ë‹Œ, **ë°ì´í„°ê°€ í†µì œëœ 'RAG'** ì¤‘ì‹¬ìœ¼ë¡œ ì§„í–‰í•˜ì—¬ `hops=2` ì¿¼ë¦¬ì˜ ì¦‰ê°ì ì¸ ë°˜ì‘ì„ ë³´ì¥í•©ë‹ˆë‹¤.
    * **M1 (ìº¡ìŠ¤Gí†¤) 'ìœ ë ¹ ìƒíƒœ' ë°©ì–´:**
        1.  [Phase 4] API(`POST /collections`)ê°€ `200 OK` (MySQL ì €ì¥ ì„±ê³µ)ë¥¼ ë°˜í™˜í•˜ë©´, `react-query`ì˜ **`onSuccess`**ê°€ `queryClient.invalidateQueries({ queryKey: ['knowledge-map'] })`ë¥¼ ì¦‰ì‹œ í˜¸ì¶œí•©ë‹ˆë‹¤.
        2.  ì‚¬ìš©ìê°€ P5 ë·°ë¡œ ì „í™˜í•˜ë©´, `react-query`ëŠ” 'knowledge-map' ìºì‹œê°€ 'ë”ëŸ½ë‹¤(stale)'ê³  ì¸ì§€í•˜ê³  `GET /knowledge-map`ì„ **ìë™ìœ¼ë¡œ ì¬ìš”ì²­(refetch)**í•©ë‹ˆë‹¤.
        3.  ì´ ì‹œì (0.5~1ì´ˆ ë’¤)ì´ë©´ `Celery`ì˜ `sync_neo4j_task`ê°€ ì™„ë£Œë˜ì–´, ì‚¬ìš©ìëŠ” `Neo4j`ì— ì •ìƒ ë°˜ì˜ëœ ì§€ë„ë¥¼ ë³´ê²Œ ë©ë‹ˆë‹¤. (ë°ëª¨ ì„±ê³µ)

---

### 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ë°ì´í„° ì¼ê´€ì„±

* **'ì§„ì‹¤ì˜ ì›ì²œ' (SoT) (M1, M2 ê³µí†µ):**
    * **MySQL (SoT):** ëª¨ë“  ì›ë³¸ ë°ì´í„°(ê¸°ì‚¬ ë³¸ë¬¸, ìœ ì € ì •ë³´)ì˜ 'ì§„ì‹¤ì˜ ì›ì²œ'.
    * **Neo4j (View):** ê´€ê³„ íƒìƒ‰ì„ ìœ„í•œ 'ê·¸ë˜í”„ ë·°'. `MySQL ID (FK)`ì™€ ìµœì†Œ ë©”íƒ€ë°ì´í„°ë§Œ ì €ì¥.

* **ë°ì´í„° ë™ê¸°í™” ì „ëµ:**
    * **M1 (ìº¡ìŠ¤í†¤):** [Phase 5]ì˜ **'ìœ ë ¹ ìƒíƒœ' ë°©ì–´**(`invalidateQueries`)ì— ì§‘ì¤‘í•©ë‹ˆë‹¤. (Perceptual Consistency - ì¸ì§€ì  ì¼ê´€ì„±)
    * **M2 (í”„ë¡œë•ì…˜):** `Celery Beat` ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•´ ë§¤ì¼ ìì • `MySQL`ê³¼ `Neo4j` ë°ì´í„°ë¥¼ ë¹„êµí•˜ëŠ” **'ë³´ì • ìŠ¤í¬ë¦½íŠ¸'**ë¥¼ ì‹¤í–‰í•˜ì—¬ 'ìµœì¢… ì¼ê´€ì„±(Eventual Consistency)'ì„ ë³´ì¥í•©ë‹ˆë‹¤.

---

### 4. ETL ë° DevOps ì „ëµ

* **ETL íŠ¸ë¦¬ê±°:**
    * **M1 (ìº¡ìŠ¤í†¤):** ë°ëª¨ ì‹œì—°ì„ ìœ„í•œ **íë ˆì´ì…˜ëœ ë°ì´í„°**ëŠ” **'ìˆ˜ë™/ì‚¬ì „ ì‹¤í–‰'**ìœ¼ë¡œ `Celery` ì›Œì»¤ë¥¼ í†µí•´ ë¯¸ë¦¬ DBì— ì €ì¥í•´ ë‘¡ë‹ˆë‹¤. `Celery Beat` (ìŠ¤ì¼€ì¤„ëŸ¬)ëŠ” M2 ë¡œë“œë§µìœ¼ë¡œ ë‚¨ê²¨ë‘¡ë‹ˆë‹¤.
    * **M2 (í”„ë¡œë•ì…˜):** `Celery Beat` (ìŠ¤ì¼€ì¤„ë§)ì™€ 'ì˜¨ë””ë§¨ë“œ' (ì‹ ê·œ ê°œë… ìˆ˜ì§‘) íŠ¸ë¦¬ê±°ë¥¼ ëª¨ë‘ í™œì„±í™”í•˜ì—¬ í•˜ì´ë¸Œë¦¬ë“œ ìë™ ETLì„ ì™„ì„±í•©ë‹ˆë‹¤.

* **ê°œë°œ ë° ë°°í¬:**
    * **M1 (ìº¡ìŠ¤í†¤):** **`Docker Compose`**ì™€ **`Flask-Migrate (Alembic)`** ë„ì…ì— ì§‘ì¤‘í•©ë‹ˆë‹¤. ë¡œì»¬ê³¼ GCE ë°°í¬ í™˜ê²½ì˜ ìŠ¤í‚¤ë§ˆ ë° ì¸í”„ë¼ë¥¼ ì¼ì¹˜ì‹œí‚¤ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤. (CI/CDëŠ” ìˆ˜ë™)
    * **M2 (í”„ë¡œë•ì…˜):** **`GitHub Actions`**ë¥¼ ë„ì…í•˜ì—¬ (Test -> Build -> Push to GCR -> Deploy) **CI/CD íŒŒì´í”„ë¼ì¸ì„ ì™„ì „ ìë™í™”**í•©ë‹ˆë‹¤.

---

### 5. ê¸°ìˆ  ìŠ¤íƒ ì´ëŒ (v2.3)

| êµ¬ë¶„ | M1 (ìº¡ìŠ¤í†¤) í•µì‹¬ ê¸°ìˆ  | M2 (í”„ë¡œë•ì…˜) í™•ì¥ ê¸°ìˆ  |
| :--- | :--- | :--- |
| **Frontend** | React, TypeScript, **React Flow** | - |
| **State Mgt** | **@tanstack/react-query** | - |
| **Backend** | Flask, Gunicorn, **Celery** | **Celery Beat** (ìŠ¤ì¼€ì¤„ëŸ¬) |
| **Database** | **MySQL (SoT)**, **Neo4j (View)**, Redis | - |
| **DevOps** | **Docker Compose**, **Flask-Migrate** | **GitHub Actions (CI/CD)** |
| **Consistency**| `invalidateQueries` (ì¸ì§€ì  ì¼ê´€ì„±) | 'ë³´ì • ìŠ¤í¬ë¦½íŠ¸' (ìµœì¢… ì¼ê´€ì„±) |

---
